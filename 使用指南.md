# 网络安全技术大作业 - 使用指南

## 快速开始

### 1. 检查环境
确保已安装Python 3.7或更高版本：
```bash
python --version
```

### 2. 运行快速测试
验证所有模块是否正常工作：
```bash
python quick_test.py
```

如果看到"🎉 所有测试通过！"，说明项目已准备就绪。

### 3. 运行主程序
启动交互式演示菜单：
```bash
python main.py
```

## 各模块单独运行

### 哈夫曼编码演示
```bash
python huffman.py
```
**演示内容：**
- 文本压缩和解压
- 编码表生成
- 压缩率计算

### RSA加密演示
```bash
python rsa_crypto.py
```
**演示内容：**
- RSA密钥生成
- 整数和字符串加密
- 加密解密验证

### 安全通信系统演示
```bash
python secure_communication.py
```
**演示内容：**
- Alice和Bob之间的端到端加密通信
- 结合哈夫曼压缩和RSA加密
- 完整的发送和接收流程

### 中间人攻击演示
```bash
python mitm_attack.py
```
**演示内容：**
- 场景1: 失败的攻击（正确密钥交换）
- 场景2: 成功的攻击（攻击者控制密钥交换）
- 防御方法说明

**重要概念：**
- 密钥交换的重要性
- 公钥验证的必要性
- 数字证书的作用

### 时间攻击演示
```bash
python timing_attack.py
```
**演示内容：**
- 时间攻击原理
- 易受攻击实现的时间分析
- 安全实现对比
- 防御技术

**可选：** 安装matplotlib以生成可视化图表
```bash
pip install matplotlib
```

## 主程序菜单说明

运行 `python main.py` 后，您会看到以下菜单：

```
1. 哈夫曼编码演示
2. RSA加密演示
3. 安全通信系统演示
4. 中间人攻击演示
5. 时间攻击演示
6. 完整演示（运行所有模块）
0. 退出
```

### 推荐的学习顺序

**初学者：**
1. 先运行"哈夫曼编码演示"（选项1）
2. 然后"RSA加密演示"（选项2）
3. 理解基础后，运行"安全通信系统演示"（选项3）
4. 最后学习攻击：中间人攻击（选项4）和时间攻击（选项5）

**已有基础：**
- 直接运行"完整演示"（选项6）查看所有内容

## 演示效果示例

### 哈夫曼编码
```
原始文本: hello world! this is a demonstration...
原始长度: 56 字符 (448 比特)
编码后长度: 234 比特
压缩率: 47.77%
```

### RSA加密
```
公钥 (e, n):
  e = 65537
  n的位数 = 512 位

原始消息: Hello, RSA!
加密后: 2 个密文块
解密后: Hello, RSA!
加密解密验证: ✓ 成功
```

### 中间人攻击
```
场景2: 成功的中间人攻击

[Alice] 发送的消息: The password is SECRET123
[Mallory] ✓ 成功解密原始消息
[Mallory] 修改消息: The password is PUBLIC123
[Bob] 接收的消息: The password is PUBLIC123

消息是否被篡改: ✗ 是
[结论] 攻击者成功篡改了消息！
```

### 时间攻击
```
时间统计:
  平均时间: 245.32 微秒
  标准差: 18.45 微秒
  时间变异系数: 7.52%

[攻击者] 分析结果:
  ⚠ 检测到明显的时间差异！
  → 该实现容易受到时间攻击
```

## 常见问题

### Q1: 程序运行很慢怎么办？
A: RSA密钥生成需要一些时间。如果觉得太慢，可以：
- 在代码中将 `key_size=1024` 改为 `key_size=512` 或 `key_size=256`
- 注意：更小的密钥不安全，仅用于演示

### Q2: 时间攻击看不到图表？
A: 需要安装matplotlib：
```bash
pip install matplotlib
```
图表会保存为PNG文件在当前目录。

### Q3: 如何修改测试消息？
A: 在各个文件的 `if __name__ == "__main__":` 部分修改测试消息。

例如在 `secure_communication.py` 中：
```python
message = "这里改成你想要的消息"
```

### Q4: 可以用于真实通信吗？
A: **不可以！** 本项目仅用于教育目的：
- 缺少完整的错误处理
- 未经安全审计
- 密钥大小不足（演示用）
- 缺少密钥管理机制

### Q5: 如何增加密钥大小？
A: 修改初始化参数：
```python
# 原来
rsa = RSA(key_size=512)

# 改为
rsa = RSA(key_size=2048)  # 更安全但更慢
```

## 学习建议

### 理解原理
1. **哈夫曼编码：** 为什么能压缩数据？编码表如何生成？
2. **RSA加密：** 为什么大数分解困难？公钥和私钥的关系？
3. **中间人攻击：** 为什么需要验证公钥？数字证书的作用？
4. **时间攻击：** 为什么时间会泄露信息？如何防御？

### 实践探索
1. 修改测试消息，观察不同输入的效果
2. 调整密钥大小，比较性能差异
3. 尝试修改攻击代码，增加新的攻击方式
4. 思考：如何改进当前的防御措施？

### 扩展学习
1. 研究真实的TLS/SSL协议
2. 了解数字证书和PKI体系
3. 学习其他侧信道攻击（如功耗分析）
4. 探索更多加密算法（AES、ECC等）

## 性能参数

### 推荐配置
| 场景 | 密钥大小 | 运行时间 |
|------|---------|---------|
| 快速测试 | 256位 | 10-20秒 |
| 标准演示 | 512位 | 30-60秒 |
| 完整演示 | 1024位 | 2-5分钟 |

### 密钥大小对比
| 密钥大小 | 安全性 | 生成速度 | 加密速度 |
|---------|-------|---------|---------|
| 256位 | ⚠️ 不安全 | 很快 | 很快 |
| 512位 | ⚠️ 演示用 | 快 | 快 |
| 1024位 | 🔶 已弱 | 中等 | 中等 |
| 2048位 | ✅ 推荐 | 慢 | 慢 |
| 4096位 | ✅ 高安全 | 很慢 | 很慢 |

## 故障排除

### 导入错误
```
ModuleNotFoundError: No module named 'xxx'
```
**解决：** 确保所有Python文件都在同一目录下。

### 密钥生成失败
```
ValueError: 模逆元不存在
```
**解决：** 重新运行，素数生成有随机性。

### 时间攻击数据异常
```
统计数据显示时间差异很小
```
**解决：** 这是正常的，说明安全实现有效。

## 项目结构

```
assessment/
├── huffman.py              # 哈夫曼编码核心实现
├── rsa_crypto.py          # RSA加密核心实现
├── secure_communication.py # 安全通信系统
├── mitm_attack.py         # 中间人攻击模拟
├── timing_attack.py       # 时间攻击模拟
├── main.py               # 主程序入口
├── quick_test.py         # 快速测试脚本
├── requirements.txt      # 依赖列表
├── README.md            # 详细说明文档
└── 使用指南.md          # 本文件
```

## 联系与反馈

如果遇到问题或有改进建议，欢迎：
1. 查看代码注释了解实现细节
2. 参考README.md中的技术文档
3. 运行quick_test.py诊断问题

祝学习愉快！🎓

